# Проект управления заказами для Effective Mobile

Этот проект представляет собой тестовое приложение для управления заказами. Основной целью является создание, чтение, обновление и удаление заказов с помощью REST API. Каждый заказ содержит информацию о номере стола и списке блюд.

## Функционал

1. **Создание заказа**: Вы можете создать новый заказ, указав номер стола и список блюд с их стоимостью.
2. **Просмотр заказов**: Существует возможность просматривать все заказы в системе. Запросы могут быть выполнены с фильтрацией по номеру стола.
3. **Поиск по столу**: Реализован функционал для поиска заказов по номеру стола или статусу.   
4. **Обновление заказа**: Вы можете обновить информацию о заказе, например, изменить номер стола или изменить список блюд.
5. **Удаление заказа**: Возможность удалить заказ из системы.
6. **Расчёт выручки**: Отдельная страница с возможностью просмотра выручки за определенный день для всех заказов со статусом "Оплачено"

## Дополнительные требования
1. **База данных**: Используется PostgreSQL
2. **Валидация данных**: Обработка некорректного ввода и ошибок
3. **CRUD операции**: Реализованы все типы операций через web-интерфейс
4. **REST API**: Создано API для поддержки всех CRUD операций.
5. **ООП**: Модели используют принципы ООП
6. **Документация**: Написаны докстринги к функциям и моделям, основные блоки кода имеют комментарии
7. **Тесты**: Ключевые функции покрыты тестами при помощи Pytest
8. **Дополнительные возможности**: Реализовано гибкое редактирование заказа после добавления, в том числе изменение статуса и списка блюд. Добавлена возможность фильтровать список заказов по статусу как в веб-интерфейсе, так и в админ-панели.

## REST API

Проект предоставляет следующие эндпоинты:

### 1. **GET /orders/** - Получение списка всех заказов.

Пример ответа:

`[ { "id": 1, "table_number": 3, "items": ["вода 100", "салат 50"] }, { "id": 2, "table_number": 5, "items": ["суп 150"] } ]`

### 2. **GET /orders/{id}/** - Получение информации о конкретном заказе по его ID.

Пример ответа:

`{ "id": 1, "table_number": 3, "items": ["вода 100", "салат 50"] }`

### 3. **POST /orders/** - Создание нового заказа. Тело запроса должно содержать номер стола и список блюд.

Пример запроса:

`{ "table_number": 4, "items": ["пицца 200", "пиво 150"] }`

Пример ответа:

`{ "id": 3, "table_number": 4, "items": ["пицца 200", "пиво 150"] }`


### 4. **PUT /orders/{id}/** - Обновление существующего заказа. Тело запроса должно содержать новый номер стола и/или новый список блюд.

Пример запроса:

`{ "table_number": 6, "items": ["паста 300", "сок 100"] }`


Пример ответа:

`{ "id": 1, "table_number": 6, "items": ["паста 300", "сок 100"] }`


### 5. **DELETE /orders/{id}/** - Удаление заказа по его ID.

Пример ответа:

`{ "status": "success", "message": "Order deleted" }`



## Установка и запуск

1. Клонируйте репозиторий:
    ```
    git clone https://github.com/davewalker777/test_cafe.git
    ```
   
2. Активируйте виртуальное окружение:
    ```
    venv\Scripts\activate
    ```

3. Перейдите в каталог проекта:
    ```
    cd cafe
    ```

4. Установите зависимости:
    ```
    pip install -r requirements.txt
    ```

5. Настройте базу данных:

   Для использования PostgreSQL в качестве базы данных, выполните следующее:


   - Настройте подключение к базе данных в файле `settings.py`:

     ```python
     DATABASES = {
         'default': {
             'ENGINE': 'django.db.backends.postgresql',
             'NAME': 'bdname',
             'USER': 'youruser',
             'PASSWORD': 'yourpassword',
             'HOST': 'localhost',
             'PORT': '5432',
         }
     }
     ```

    

6. Примените миграции:
    ```
    python manage.py makemigrations
    python manage.py migrate
    ```
7. Создайте суперпользователя:
    ```
    python manage.py createsuperuser
    ```
   Следуйте инструкциям в терминале.


7. Запустите сервер:
    ```
    python manage.py runserver
    ```

Теперь сервер будет доступен по адресу `http://127.0.0.1:8000`.

## Примечания

- Используется Django для создания веб-сервиса.
- Для тестирования API рекомендуется использовать инструменты, такие как Postman или cURL.
- Все ответы возвращаются в формате JSON.
